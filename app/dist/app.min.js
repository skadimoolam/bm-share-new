!function(e){"use strict";e.module("bm-share-app",["firebase"]).controller("AppCtrl",["$scope","$firebaseArray","LocalDataService",function(o,t,r){o.formErrorShow=!1,o.addForm={},o.addModeText=!0,o.addModeLink=!1,o.limitNo=25,o.form={name:r.getName(),address:r.getAddress()};var a=r.getAddress(),d="https://bm-share.firebaseio.com/bm-share/"+a,s=new Firebase(d),n=t(s);n.$loaded(function(e){n=n.reverse()}),o.data=n,o.openUrl=function(e){chrome.tabs.create({url:e,active:!0})},o.delItem=function(e){o.data.$remove(e).then(function(o){o.key()===e.$id})},o.saveSettings=function(){r.setData(o.form.name,o.form.address)},o.limitTo=function(t){e.isNumber(t)?o.limitNo=t:o.limitNo=25},o.addNew=function(){o.addForm.name||o.addForm.text?(o.data.$add({name:o.addForm.name||o.addForm.text,url:o.addForm.url?o.addForm.url:"",addedBy:r.getName()}),o.addForm={},o.addModeText=!0,o.addModeLink=!1,o.formErrorShow=!1):o.formErrorShow=!0}}]).service("LocalDataService",function(){this.setData=function(e,o){"undefined"!=typeof localStorage?(localStorage.setItem("bm-user",e),localStorage.setItem("bm-address",o)):console.log("no local storage")},this.getName=function(){return"undefined"===localStorage.getItem("bm-user")?"Default":localStorage.getItem("bm-user")},this.getAddress=function(){return"undefined"===localStorage.getItem("bm-address")?"office":localStorage.getItem("bm-address")}}).service("ChromeDataService",function(){this.getName=function(){var e="";chrome.storage.local.get("bm-user",function(o){return void 0==o["bm-user"]?e="Default":(console.log(o["bm-user"]),e=o["bm-user"]),e})},this.getAddress=function(){var e="";chrome.storage.local.get("bm-address",function(o){return void 0==o["bm-address"]?e="office":(console.log(typeof o["bm-address"]),e=o["bm-address"]),redataa})},this.setData=function(e,o){chrome.storage.local.set({"bm-user":e,"bm-address":o},function(){console.log("saved")})}})}(angular);